{"version":3,"file":"test-component.js","sources":["../src/id.ts","../src/types/is-non-collection.ts","../src/types/is-dom.ts","../src/types/is-date.ts","../src/types/is-object.ts","../src/types/type.ts","../src/checks/equals.ts","../src/timing/debounce.ts","../src/objects/get.ts","../src/objects/diff.ts","../src/observe/observer.ts","../src/dom/web-components/component.ts","../src/dom/web-components/test-component/test-component.ts"],"sourcesContent":["let index = 0\n\nfunction doId(indx: number) {\n    return doHash() + indx\n}\n\nfunction doHash() {\n    return (performance.now() + 'xxxxxxxxxxxxxxxx')\n        .replace(\n            /[x]|\\./g,\n            function () {\n                return (Math.random() * 16 | 0).toString(16)\n            }\n        )\n}\n\nexport default function ID() {\n    index = index + 1\n    return doId(index)\n}","/**\n * Determines if a value is not a collection \n * @function IsNonCollection\n * @param {any} value - The value to test\n * @return {boolean} Whether or not the value is a collection\n * @example\n * IsNonCollection({}) // false\n * IsNonCollection([]) // false\n * IsNonCollection('') // true\n * IsNonCollection(1) // true\n * IsNonCollection(null) // true\n * IsNonCollection(undefined) // true\n * IsNonCollection(()=>{}) // true\n * IsNonCollection(true) // true\n */\n\nconst nonCollections = ['string', 'number', 'null', 'undefined', 'function', 'boolean', 'date']\n\nexport default function IsNonCollection(value: any) { return nonCollections.indexOf(typeof value) > -1 || value === null || value instanceof Date }","/**\n * Determines if a value is a valid DOM element\n * @function IsDom\n * @param {any} value - The value to test\n * @return {boolean} If the value is a DOM element\n * @example\n * const element = document.createElement('div')\n * IsDom(element) // true\n * IsDom('nope') // false\n */\n\nvar isBrowser = new Function(\"try {return this===window;}catch(e){ return false;}\")\nexport default function IsDom(value: any) {\n    if (!isBrowser()) { return false }\n    return (value instanceof Element) || (value instanceof Node)\n}","/**\n * Determines if a value is or can be a valid date\n * @function IsDate\n * @param {any} value - The value to test\n * @return (boolean) If the value is a valid date\n * @example \n * IsDate('Mon Nov 18 2019 07:41:48 GMT-0800') // true\n * IsDate('Not a date') // false\n */\n\nexport default function IsDate(value: any) {\n    if (typeof value === 'string' && parseFloat(value).toString() === value) { return false } // i.e. 222 is a date, but we don't want that\n\n    const tempValue: any = new Date(Date.parse(value))\n\n    return (\n        tempValue !== 'Invalid Date'\n        && !isNaN(tempValue)\n        && tempValue instanceof Date\n    )\n}","/**\n * Determines if the value is an object\n * @function IsObject\n * @param {any} value \n * @return {boolean} Whether or not the value is an object\n * @example\n * IsObject() // false\n * IsObject(()=>{}) // false\n * IsObject('') // false\n * IsObject(true) // false\n * IsObject(null) // false\n * IsObject(new Date()) // false\n * IsObject([]) // false\n * IsObject({}) // true\n */\n\nexport default function IsObject(value: any) {\n    return (typeof value).indexOf('object') > -1 && value !== null && !Array.isArray(value) && !(value instanceof Date)\n}\n","import IsNonCollection from './is-non-collection'\nimport IsDom from './is-dom'\nimport IsDate from './is-date'\nimport IsObject from './is-object'\n\nexport default function Type(value: any) {\n    return value === null ?\n        'null' :\n        IsNonCollection(value) ?\n            typeof value === 'string' ?\n                'string' :\n                !isNaN(value) ?\n                    'number' :\n                    IsDate(value) ?\n                        'date' :\n                        typeof value :\n            IsDom(value) ?\n                'dom' :\n                Array.isArray(value) ?\n                    'array' :\n                    IsObject(value) ?\n                        'object' :\n                        typeof value\n\n}","import IsNonCollection from \"../types/is-non-collection\"\nimport Type from \"../types/type\"\n\nexport default function Equals(value1: any, value2: any) {\n    const type = Type(value1)\n\n    if (Type(value2) !== type) { return false }\n\n    if (IsNonCollection(value1)) {\n        if (type === 'date') {\n            let d = value1 === value2\n            d = new Date(value1).getTime() === new Date(value2).getTime()\n            return d\n        }\n\n        return value2 === value1\n    }\n\n    if (type === 'boolean' && value1 !== value2) {\n        return false\n    }\n\n    if (type === 'array' && value1.length !== value2.length) {\n        return false\n    }\n\n    if (type === 'object' && Object.keys(value1).length !== Object.keys(value2).length) {\n        return false\n    }\n\n    if (type === 'object' && value1.constructor !== value2.constructor) {\n        return false\n    }\n\n    if (type === 'dom') {\n        // return value1.isEqualNode(value2) // 2 different but similar nodes returns true\n        return value1.isSameNode(value2)\n    }\n\n    // Start walking\n\n    if (type === 'array') {\n        let len = value1.length\n\n        while (len--) {\n            if (!Equals(value1[len], value2[len])) {\n                return false\n            }\n        }\n    }\n\n    if (type === 'object') {\n        const keys = Object.keys(value1)\n        let len = keys.length\n\n        while (len--) {\n            if (!Equals(value1[keys[len]], value2[keys[len]])) {\n                return false\n            }\n        }\n    }\n\n    return true\n}","const Debounce = (func: Function, wait = 33, immediate = false) => {\n    let timer: any = 0\n    const _this = this\n    return function () {\n        const context: any = _this\n        const args = arguments\n        const callNow = immediate && !timer\n        const later = function () {\n            timer = requestAnimationFrame(function () {\n                timer = 0\n                if (!immediate) func.apply(context, args)\n            })\n        }\n\n        clearTimeout(timer)\n        cancelAnimationFrame(timer)\n\n        timer = setTimeout(later, wait)\n\n        if (callNow) { func.apply(context, args) }\n    }\n}\nexport default Debounce","function toStringOrNumber(arg: string | number): string | number {\n    const argNumber = parseFloat(arg as string)\n    return !isNaN(arg as number) ? (arg as string).trim() : argNumber\n}\n\nfunction emptyModifyFn(v: any): any {\n    return v\n}\n\nfunction getFunctionParams(str = ''): string {\n    const result = /\\((.*?)\\)/g.exec(str || '')\n    return result ? result[1] : ''\n}\n\nexport default function Get(\n    obj: any,\n    path: string,\n    emptyVal?: any,\n    modifyFn: Function = emptyModifyFn\n): any {\n\n    /** If nothing to search, return */\n    if (!obj) { return modifyFn(emptyVal) }\n\n    /** The search array, initial search item being the source */\n    const pathParts = path.split('.')\n    let result = obj\n\n    const count = pathParts.length\n    let loopIndex = pathParts.length\n\n    while (loopIndex) {\n        if (result === undefined || result === null) {\n            result = emptyVal\n            break\n        }\n\n        const partIndex = count - loopIndex\n        const startParens = /\\(/.exec(pathParts[partIndex])\n\n        if (startParens) {\n            const fn = result[pathParts[partIndex].slice(0, startParens.index)]\n\n            if (typeof fn === 'function') {\n\n                result = fn.apply(\n                    result,\n                    getFunctionParams(pathParts[partIndex])\n                        .split(',')\n                        .map(toStringOrNumber)\n                )\n\n                loopIndex = loopIndex - 1\n                continue\n            }\n        }\n\n        result = result[pathParts[partIndex]]\n        loopIndex = loopIndex - 1\n    }\n\n    /** If nothing was found return emptyVal */\n    if (result === undefined || result === null) { result = emptyVal }\n\n    return modifyFn(result)\n}","import Type from '../types/type'\n\nfunction isEmpty(toCheck: any) {\n    if (toCheck === undefined) { return true }\n    if (typeof toCheck === 'object' && Object.keys(toCheck).length === 0) { return true }\n    return false\n}\n\nexport default function Diff(sourceObject: any, compareObject: any) {\n    const differences: { [key: string]: any } = {}\n    const sourceType = Type(sourceObject)\n    const compareType = Type(compareObject)\n    const validTypes = ['object', 'array']\n\n    if (validTypes.indexOf(sourceType) == -1 || validTypes.indexOf(compareType) == -1) {\n        return sourceObject !== compareObject ? compareObject === undefined ? sourceObject : compareObject : undefined\n    }\n\n    if (sourceType !== compareType) {\n        return compareType == 'undefined' && sourceType !== 'undefined' ? sourceObject : compareObject\n    }\n\n    function doCompare(index: string | number) {\n        if (differences[index]) { return }\n\n        const compared = Diff(sourceObject[index], compareObject[index])\n\n        if (!isEmpty(compared)) {\n            differences[index] = sourceObject[index] === compared ? undefined : compared\n        }\n    }\n\n    if (sourceType == 'object') {\n        Object.keys(sourceObject).forEach(doCompare)\n        Object.keys(compareObject).forEach(doCompare)\n    }\n\n    if (sourceType == 'array') {\n        sourceObject.forEach((_v: any, index: number) => doCompare(index))\n        compareObject.forEach((_v: any, index: number) => doCompare(index))\n    }\n\n    return differences\n}","import ID from '../id'\nimport Type from '../types/type'\nimport Equals from '../checks/equals'\nimport Debounce from '../timing/debounce'\nimport Get from '../objects/get'\nimport Diff from '../objects/diff'\n\nconst observers = new WeakMap()\nconst observerKeys: { [key: string]: string[] } = {}\n\n    ; (window as any).observers = () => ({\n        map: observers,\n        keys: Object.keys(observerKeys)\n    })\n\nconst emptyNext = (_value: any, _force?: boolean) => { }\nconst emptyError = (_value: any) => { }\nconst emptyFn = () => { }\nexport const SubscribeFn = (_next: typeof emptyNext, _error?: typeof emptyError, _complete?: typeof emptyFn) => emptyFn\nconst emptyUnsubscribe = (_subscription: ObserverSubscription) => { }\nexport const nullObserver = (): ObserverInstance => ({\n    isComplete: true,\n    value: undefined,\n    previous: undefined,\n    subscriptions: {},\n    lastUpdate: 0,\n    settings: {},\n    removed: [],\n    added: [],\n    changed: {},\n    next: emptyNext,\n    error: emptyError,\n    complete: emptyFn,\n    subscribe: SubscribeFn,\n    unsubscribe: emptyUnsubscribe,\n    insert: (_element: any, _index?: number) => { },\n    insertAll: (_elements: any, _index?: number) => { },\n    remove: (_element: any, _index: any, _all?: boolean) => { },\n    removeElements: (_elements: any[]) => { },\n    reverse: emptyFn,\n    has: (_value: any) => false,\n    indexOf: (_value: any) => -1,\n    on: (_name: string, _callback: Function) => () => { },\n    trigger: (_name: string, _data: any) => { },\n    data: {}\n})\n\nexport interface ObserverSubscription {\n    next: typeof emptyNext\n    error?: typeof emptyError\n    complete?: typeof emptyFn\n    unsubscribe?: Function\n    id: string\n}\n\nexport interface ObserverOptions {\n    noInit?: boolean\n    nextOnNew?: boolean\n    noSubsComplete?: boolean\n    matchType?: boolean\n    takeFirst?: boolean\n    takeLast?: boolean\n    takeBy?: number\n    onSubscribe?: (subscription?: ObserverSubscription) => void\n    formatter?: (toFormat: any, observer?: ObserverInstance) => any\n    initialValue?: any\n}\n\nexport interface ObserverValuesObject {\n    errors: string[]\n    updated: number\n    subscriptions: { [key: string]: ObserverSubscription }\n    isComplete: boolean\n    eventCallbacks: { [key: string]: { [key: string]: Function } }\n    initialType: string\n    initialValue: any\n    formatter: Function\n    matchType: boolean\n    nextOnNew: boolean\n    noInit: boolean\n    noSubsComplete: boolean\n    takeFirst: boolean\n    takeLast: boolean\n    takeBy: number\n    value: any\n    previousValue: any\n}\n\nexport interface ObserverInstance {\n    isComplete: boolean\n    value: any\n    previous: any\n    subscriptions: { [key: string]: ObserverSubscription }\n    lastUpdate: number\n    settings: ObserverOptions\n    removed: any[]\n    added: any[]\n    changed: { [key: string]: any }\n    next: typeof emptyNext\n    error: typeof emptyError\n    complete: typeof emptyFn\n    subscribe: typeof SubscribeFn\n    unsubscribe: typeof emptyUnsubscribe\n    insert: (element: any, index?: number) => void\n    insertAll: (elements: any, index?: number) => void\n    remove: (element: any, index: any, all?: boolean) => void\n    removeElements: (elements: any[]) => void\n    reverse: typeof emptyFn\n    has: (value: any) => boolean\n    indexOf: (value: any) => number\n    on: (name: string, callback: Function) => Function\n    trigger: (name: string, data: any) => void\n    data: any\n}\n\nexport default function Observer(initialValue?: any, options: ObserverOptions = {}) {\n    let _this: any = [ID()]\n    observerKeys[_this[0]] = _this\n    const noInit = options.noInit ? true : false\n    const nextOnNew = options.nextOnNew === false ? false : true\n    const matchType = options.matchType ? true : false\n    const onSubscribe = options.onSubscribe && typeof options.onSubscribe === 'function' ? options.onSubscribe : (val: any) => val\n    const formatter = options.formatter && typeof options.formatter === 'function' ? options.formatter : (val: any) => val\n    initialValue = formatter(initialValue)\n    const initialType = Type(initialValue)\n    const takeFirst = !!options.takeFirst\n    const takeLast = !!options.takeLast\n    const debounced = !!takeFirst || !!takeLast\n    const takeBy = options.takeBy || 0\n\n    const getInstance = () => observers.get(_this)\n\n    const formatValue = (toFormat: any, obs: any = {}) => {\n        const f = formatter(toFormat, obs)\n        const inst = getInstance()\n        return inst && matchType && Type(f) !== initialType ? inst.data.value : f\n    }\n\n    const states = [initialValue]\n\n    const addedRemovedReducer = (source: any[]) => (target: any[], current: any) => {\n        if (source.indexOf(current) === -1) { target.push(current) }\n        return target\n    }\n\n    const bothArray = (source: any, target: any) => Array.isArray(source) && Array.isArray(target)\n\n    function getAddedRemoved(source: any[], target: any[]) {\n        return !bothArray(source, target) ? [] : source.reduce(addedRemovedReducer(target), [])\n    }\n\n\n    function getRemoved() {\n        const inst = getInstance()\n        return inst && inst.data ?\n            getAddedRemoved(inst.data.previousValue, inst.data.value) :\n            []\n    }\n\n    function getAdded() {\n        const inst = getInstance()\n        return inst && inst.data ? getAddedRemoved(inst.data.value, inst.data.previousValue) : []\n    }\n\n    function destroy() {\n        const inst = getInstance()\n\n        if (!inst) { return }\n\n        inst.trigger('destroy', inst.data)\n\n        Object.keys(inst.data.subscriptions).forEach(k => Get(inst.data, `subscriptions.${k}.unsubscribe`, emptyFn))\n\n        inst.data.isComplete = true\n\n        delete observerKeys[_this[0]]\n        observers.delete(_this)\n        _this = null\n    }\n\n    const callFn = (\n        val: any,\n        valuesObj: ObserverValuesObject | undefined,\n        functionKey: string,\n        subscriptions: { [key: string]: ObserverSubscription }\n    ) =>\n        (id: string) => {\n            const fn = Get(subscriptions, `${id}.${functionKey}`)\n            typeof fn === 'function' ? fn(val, valuesObj || {}, id) : undefined\n        }\n\n    function doLoop(functionKey: string, val: any, valuesObj?: ObserverValuesObject) {\n        const inst = getInstance()\n\n        if (!inst) { return }\n\n        inst.trigger(functionKey, valuesObj || {})\n\n        const subs = inst.data.subscriptions\n\n        Object.keys(subs).forEach(callFn(val, valuesObj, functionKey, subs))\n\n        if (functionKey === 'complete') { destroy() }\n    }\n\n    const debouncedLoop = Debounce(doLoop, takeBy, !!takeFirst)\n    const loop = !debounced ? doLoop : debouncedLoop\n\n    function unsubscribe(subscription: ObserverSubscription) {\n        return function unsubscribeInner() {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const subscriptions = inst.data.subscriptions\n\n            delete subscriptions[subscription.id]\n\n            inst.trigger('unsubscribe', { subscription, subscriptions })\n\n            if (inst.data.noSubsComplete && Object.keys(subscriptions).length === 0) {\n                destroy()\n            }\n        }\n    }\n\n    function getArrayIndexOf(element: any, isArray: boolean) {\n        const inst = getInstance()\n\n        if (!inst || !isArray) { return }\n\n        const index = inst.data.value.indexOf(element)\n\n        return index > -1 ? index : undefined\n    }\n\n    function getObjectKey(value: any) {\n        let _result\n\n        const inst = getInstance()\n\n        if (!inst) { return }\n\n        const dataVal = inst.data.value\n\n        const keys = Object.keys(dataVal)\n        let i = keys.length\n\n        while (i--) {\n            if (value === dataVal[keys[i]]) {\n                _result = keys[i]\n                break\n            }\n        }\n\n        return _result\n    }\n\n    function getValTypes(inst?: any) {\n        inst = inst || getInstance()\n        const value = Get(inst, 'data.value')\n\n        return inst ? {\n            value,\n            isArray: Array.isArray(value),\n            isString: typeof value === 'string'\n        } : {}\n    }\n\n    let result: ObserverInstance = {\n        get isComplete() {\n            const inst = getInstance()\n            if (!inst) { return true }\n\n            return inst.data.isComplete\n        },\n        get value() {\n            const inst = getInstance()\n            if (!inst) { return }\n            return inst.data.value\n        },\n        get previous() {\n            const inst = getInstance()\n            if (!inst) { return }\n            return inst.data.previousValue\n        },\n        get subscriptions() {\n            const inst = getInstance()\n            if (!inst) { return }\n            return inst.data.subscriptions\n        },\n        get lastUpdate() {\n            const inst = getInstance()\n            if (!inst) { return }\n            return inst.data.updated\n        },\n        get settings() {\n            return {\n                initialType,\n                formatter,\n                matchType,\n                nextOnNew,\n                noInit,\n                takeFirst,\n                takeLast,\n                takeBy\n            }\n        },\n\n        get removed() { return getRemoved() },\n\n        get added() { return getAdded() },\n\n        get changed() {\n            const inst = getInstance()\n            if (!inst) { return [] }\n            return Diff(inst.data.previousValue, inst.data.value)\n        },\n\n        next: function (v: any, force?: boolean) {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const formatted = formatValue(v, inst)\n\n            if (!force && nextOnNew && Equals(formatted, inst.data.value)) { return }\n\n            inst.data.value = formatted\n            inst.data.updated = new Date().getTime()\n\n            loop('next', inst.data.value, inst.data)\n\n            return inst.data\n        },\n\n        error: function (err: string) {\n            const inst = getInstance()\n            if (!inst) { return }\n\n            inst.data.errors = inst.data.errors.concat([err])\n            inst.data.updated = new Date().getTime()\n\n            loop('error', err, inst.data)\n\n            inst.complete()\n        },\n\n        complete: function () {\n            const inst = getInstance()\n            if (!inst) { return }\n            loop('complete', inst.data)\n        },\n\n        subscribe: function (next: (value: any, force?: boolean) => void, error = (_err: string) => { }, complete = emptyFn) {\n            const inst = getInstance()\n\n            if (!inst) { return () => { } }\n\n            const subscription: ObserverSubscription = Object.assign({}, {\n                next: next,\n                error: error,\n                complete: complete,\n                id: ID()\n            })\n\n            subscription.unsubscribe = unsubscribe(subscription)\n            inst.data.subscriptions[subscription.id] = subscription\n\n            if (!noInit && inst.data.value !== undefined && typeof subscription.next === 'function') {\n                subscription.next(inst.data.value)\n            }\n\n            onSubscribe(subscription)\n\n            return unsubscribe(subscription)\n        },\n\n        unsubscribe: function (subscription: ObserverSubscription) {\n            const inst = getInstance()\n\n            if (!inst || !subscription || !subscription.id || !inst.data.subscriptions[subscription.id]) { return }\n\n            return unsubscribe(subscription)\n        },\n\n        insert: function (element: any, index?: number) {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const valData = getValTypes(inst)\n            index = index == undefined ? Get(valData, 'value.length', 0) : index\n\n            if (valData.isArray) {\n                valData.value.splice(index, index !== valData.value.length ? 1 : 0, element)\n                return inst.next(valData.value, true)\n            }\n\n            if (typeof valData.value === 'string') {\n                valData.value = valData.value.slice(0, index) + element + valData.value.slice(index)\n                return inst.next(valData.value, true)\n            }\n\n            valData.value[index as number] = element\n\n            return inst.next(valData.value, true)\n        },\n\n        insertAll: function (elements: any[] | { [key: string]: any }, index?: number) {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const valData = getValTypes(inst)\n            index = index == undefined ? Get(valData, 'value.length', 0) : index\n\n            if (valData.isArray) {\n                if (!Array.isArray(elements)) { return }\n                valData.value.splice.apply(valData.value, [index, index !== valData.value.length ? 1 : 0, ...elements])\n                return inst.next(valData.value, true)\n            }\n\n            const elementsObject = elements as { [key: string]: any }\n\n            Object.keys(elementsObject).forEach(elementKey => inst.data.value[elementKey] = elementsObject[elementKey])\n\n            return inst.next(valData.value, true)\n        },\n\n        remove: function (element: any, index: any, all = false) {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const valData = getValTypes(inst)\n\n            if (index === undefined) {\n                index = getArrayIndexOf(element, valData.isArray as boolean)\n            }\n\n            if (index === undefined && valData.isArray) {\n                return valData.value\n            }\n\n            if (index === undefined && valData.isString) {\n                return inst.next(valData.value.replace(new RegExp(element, all ? 'gm' : ''), ''), true)\n            }\n\n            if (index !== undefined) {\n                if (valData.isArray) {\n                    valData.value.splice(index, 1)\n                } else if (valData.isString) {\n                    inst.data.value = valData.value.slice(0, index)\n                } else {\n                    inst.data.value[index] = undefined\n                    delete inst.data.value[index]\n                }\n\n                return inst.next(valData.value, true)\n            }\n\n            const objectKey = getObjectKey(element)\n\n            if (objectKey !== undefined) {\n                inst.data.value[objectKey] = null\n                delete inst.data.value[objectKey]\n                return inst.next(inst.data.value, true)\n            }\n\n            return inst.next(inst.data.value, true)\n        },\n\n        removeElements: function (elements: any[]) {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const valData = getValTypes(inst)\n\n            if (valData.isArray) {\n\n                for (let i = 0; i < elements.length; i = i + 1) {\n                    const index = valData.value.indexOf(elements[i])\n                    if (index > -1) {\n                        valData.value.splice(index, 1)\n                    }\n                }\n\n                return inst.next(valData.value, true)\n            }\n\n            Object.keys(elements).forEach(prop => delete valData.value[prop])\n\n            return inst.next(valData.value, true)\n        },\n\n        reverse: function () {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const valData = getValTypes(inst)\n\n            if (valData.isArray) {\n                return inst.next(valData.value.reverse(), true)\n            }\n\n            if (valData.isString) {\n                return inst.next(valData.value.split('').reverse(), true)\n            }\n\n            inst.next(valData.value, true)\n        },\n\n        has: function has(value: any) {\n            const valData = getValTypes()\n\n            if (valData.isArray) {\n                return getArrayIndexOf(value, valData.isArray) || false\n            }\n\n            if (valData.isString) {\n                return valData.value.indexOf(value) > -1\n            }\n\n            const objectKey = getObjectKey(value)\n\n            if (objectKey !== undefined) {\n                return true\n            }\n\n            return false\n        },\n\n        indexOf: function indexOf(value: any) {\n            const valData = getValTypes()\n\n            if (valData.isArray) {\n                return getArrayIndexOf(value, valData.isArray) || -1\n            }\n\n            if (valData.isString) {\n                return valData.value.indexOf(value)\n            }\n\n            return getObjectKey(value) || -1\n        },\n\n        on: function on(name: string, callback: Function) {\n            const inst = getInstance()\n\n            if (!inst) { return () => { } }\n\n            if (!inst.data.eventCallbacks[name]) {\n                observers.get(_this).data.eventCallbacks[name] = {}\n            }\n\n            const id = ID()\n            observers.get(_this).data.eventCallbacks[name][id] = callback\n\n            return () => delete observers.get(_this).data.eventCallbacks[name][id]\n        },\n\n        trigger: function trigger(name: string, data: any) {\n            const inst = getInstance()\n\n            if (!inst) { return }\n\n            const callbacks = inst.data.eventCallbacks[name]\n\n            if (!callbacks) { return }\n\n            Object.keys(callbacks).forEach(prop => callbacks[prop](data))\n        },\n\n        data: {\n            errors: [],\n            updated: new Date().getTime(),\n            subscriptions: {},\n            isComplete: false,\n            initialType,\n            initialValue,\n            eventCallbacks: {},\n            formatter,\n            matchType,\n            nextOnNew,\n            noInit,\n            noSubsComplete: options.noSubsComplete === true ? true : false,\n            takeFirst,\n            takeLast,\n            value: null,\n            previousValue: null\n        }\n    }\n\n    observers.set(_this, result)\n\n    Object.defineProperties(getInstance().data, {\n        value: {\n            get() {\n                return states[0]\n            },\n            set(v) {\n                states.unshift(v)\n                while (states.length > 2) { states.pop() }\n            }\n        },\n        previousValue: {\n            get() {\n                return states[1]\n            }\n        }\n    })\n\n\n    return getInstance()\n}\n","import Observer, { ObserverInstance } from '../../observe/observer'\n\nexport interface ComponentState {\n    initialValue: any\n    matchType?: boolean\n    isAttribute?: boolean\n    formatter?: (value: any, observerInstance?: ObserverInstance) => any\n    onChange?: (value: any, observerInstance?: ObserverInstance) => any\n}\n\nexport type ComponentStateObject = { [key: string]: ComponentState }\n\nexport interface ComponentConfig {\n    selector: string\n    template: string\n    style?: string\n    state?: ComponentStateObject\n    connectedCallback?: () => void\n    disconnectedCallback?: () => void\n}\n\nfunction registerComponent(name: string, component: CustomElementConstructor) { return customElements.define(name, component) }\n\nfunction getTemplate(html: string = '<div></div>', style: string = '') {\n    const template = document.createElement('template')\n\n    if (style) {\n        html = `<style>${style}</style> ${html}`\n    }\n\n    template.innerHTML = html\n\n    return template\n}\n\nfunction initialValue(host: any, key: string, state: ComponentState) {\n    const attrValue = host.getAttribute(key)\n    if (attrValue !== null) { return attrValue }\n    return state.initialValue\n}\n\nexport default function CreateComponent(config: ComponentConfig) {\n    const stateKeys = Object.keys(config.state || {})\n    const observedAttributes = stateKeys.filter(key => config.state && !!config.state[key].isAttribute)\n    const template = getTemplate(config.template, config.style)\n\n    class Component extends HTMLElement {\n        static get observedAttributes() { return observedAttributes }\n\n        constructor() {\n            super()\n\n            const clone = document.importNode(template.content, true);\n            this.attachShadow({ mode: 'open' }).appendChild(clone)\n\n            if (config.state) {\n                this.state = Object.freeze(stateKeys.reduce(\n                    (result: any, key: string) => {\n                        if (!config.state) { return result }\n\n                        return Object.assign(result, {\n                            [key]: Observer(initialValue(this, key, config.state[key]),\n                                {\n                                    matchType: config.state[key].matchType === undefined ? true : config.state[key].matchType,\n                                    formatter: config.state[key].formatter\n                                }\n                            )\n                        })\n                    },\n                    {}\n                ))\n\n                stateKeys.forEach(key => {\n                    if (!config.state) { return }\n                    if (config.state[key].isAttribute) {\n                        const getter = function (this: { get: () => any; enumerable: true }) {\n                            return (this as any).state[key].value\n                        }\n                        const setter = function (this: { get: (this: { get: () => any; enumerable: true }) => any; set: (value: any) => void; enumerable: true }, value: any) {\n                            (this as any).state[key].next(value)\n                        }\n                        Object.defineProperty(this, key, {\n                            get: getter,\n                            set: setter,\n                            enumerable: true\n                        })\n                    }\n\n                    if (typeof config.state[key].onChange === 'function') {\n                        this.state[key].subscribe((value, observer) => ((config.state as any)[key].onChange as any).apply(this, [value, observer]))\n                    }\n                })\n            }\n        }\n\n        state: { [key: string]: ObserverInstance } = {}\n\n        attributeChangedCallback(attrName: string, _oldValue: any, newValue: any) {\n            if (this.state[attrName]) { this.state[attrName].next(newValue) }\n        }\n\n        connectedCallback() {\n            // setup elements\n            // setup events\n\n            if (typeof config.connectedCallback === 'function') { config.connectedCallback.call(this) }\n        }\n\n        disconnectedCallback() {\n            // remove events\n            if (typeof config.disconnectedCallback === 'function') { config.disconnectedCallback.call(this) }\n        }\n    }\n\n    registerComponent(config.selector, Component)\n\n    return Component\n}","import CreateComponent from \"../component.js\"\n\nconst TestComponent = CreateComponent({\n    selector: 'test-component',\n    template: '<div>Yep, here is some text: <div class=\"text-content\"></div></div>',\n    style: 'div{color:red;}',\n    connectedCallback: function () {\n        console.log('connectedCallback', this)\n    },\n    state: {\n        text: {\n            initialValue: 'Hello!',\n            matchType: true,\n            isAttribute: true,\n            onChange: function (value) {\n                const host = this as any\n\n                if (host.shadowRoot) {\n                    console.log(value)\n                    host.shadowRoot.querySelector('.text-content').textContent = value\n                } else {\n                    console.log('no shadow', this)\n                }\n            }\n        }\n    }\n})\n\nexport default TestComponent"],"names":["this"],"mappings":"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"}